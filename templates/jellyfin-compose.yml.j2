---
version: "3.8"

services:
  jellyfin:
    image: {{ jellyfin_image | default('jellyfin/jellyfin:2026020205') }}
    networks:
      - proxy-network
    volumes:
      - jellyfin_config:/config
      - jellyfin_cache:/cache
      - type: bind
        source: /mnt/ssd_media
        target: /media
        read_only: false
    deploy:
      replicas: 1
      placement:
        constraints:
          - node.role == worker
      restart_policy:
        condition: on-failure

networks:
  proxy-network:
    external: true

volumes:
  jellyfin_config:
  jellyfin_cache:
